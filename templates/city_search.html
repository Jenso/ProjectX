{% extends "base.html" %}
{% load url from future %}

{% block html-head %}

<script src="{{ STATIC_URL }}js/underscore-min.js"></script>
<script src="{{ STATIC_URL }}js/backbone-min.js"></script>
<script src="{{ STATIC_URL }}js/backbone-tastypie.js"></script>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
<script src="{{ STATIC_URL }}js/jquery.notify.js"></script>
<script src="{{ STATIC_URL }}js/jquery/jquery.alerts.js"></script>
<script src="{{ STATIC_URL }}js/bootstrap-collapse.js"></script>
<script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyACqrBMuk4aRYqv8mAb-d-Z1k-QOct9sW0&sensor=false">
</script>

<style>
  /* remove background around twitter bootstrap modal, on this page */
  .modal-backdrop {
  opacity:0;
  }
</style>


<script type="text/javascript">
$('#myCollapsible').collapse({
  toggle: false
})
</script>

<script type="text/javascript">
function moveScroller() {
  var a = function() {
    var b = $(window).scrollTop();
    var d = $("#scroller-anchor").offset().top;
    var c=$("#scroller");
    var height = $(window).height();
    var profile_list_height = $('#profile-list').height();
    if (b>d && profile_list_height > 510) {
      pos = height-b;
      if (pos > 0) pos = 0;
      c.css({position:"fixed",top:pos+"px"})
    } else {
      if (b<=d) {
        c.css({position:"relative",top:""})
      }
    }
  };
  $(window).scroll(a);a();
}

</script>
{% endblock %}

{% block title %}Frisör i {{ city }}{% endblock %}

  {% block content %}


<div class="row">
<div class="span12 search-city-title">
		 <h1>Frisör i {{ city }}</h1><br /><a href="/">Tillbaka till förstasidan</a><a style="margin-left:20px;" href="/search">Byt stad</a>
		
	</div>
 <div class="span4 pull-right city-search-information-span" style="">
	           
		           
		           <div id="sidebar" style="width:270px;"> 
			           <div id="scroller-anchor"></div> 
			           <div id="scroller" style="margin-top:10px; width:270px"> 
			           
<div class="search-city-map" id="map_canvas">
</div>
			           			<!-- Detta är info om stylematch -->
			           			
			           			<div class="search-city-about-stylematch">
			           			<p style=""> Om StyleMatch </p>
				           			<div style="width:286px;height:200px;overflow:auto;">	
				           			<h2>Frisörer i {{ city }}</h2>
                <p>I {{ city }} hittar du din favoritsalong eller frisör, där du kan klippa håret, göra slingor, permanenta, färga eller bara fixa en herrklippning eller damklippning. Du kan hitta en frisör i {{ city }} som passar din personlighet och vad du vill ha i en klippning. Alla <b>frisörer</b> på StyleMatch är utbildade så du kan känna dig säker på kvallitet.</p>

                <p><a href="/">StyleMatch.se</a> har XX anslutna frisörer i {{ city }} som klipper stans bästa frisyrer</p>

                <h3>De bästa frisörerna i {{ city }}</h3>
                
                <ul>
                {% for profile in profiles %}
			         <li>
			         	<a href="{{ profile.profile_url }}">{{ profile.first_name }} {{ profile.last_name }}</a> på {{ profile.salon_name }}.
			         	{{ profile.salon_adress }}, {{ profile.salon_city }}
			         	
                	</li>
                {% endfor %}
                
                
                </ul>
                
				           			</div></div>
				           			
				          <!-- Slut på info om stylematch -->
				          
				          
			           	
			           			
			           		
			           		</div>
			           </div>
			           
			           <script type="text/javascript"> 
				           $(function() {
					           moveScroller();
					           });
					   </script> 
		           </div>
	           
	           
	           	           
          
           
	
	
 	 <div class="span8" id="profile-list">
      	<ul class="profile-list profile-list-margin-zero">
      	 
      	  {% for profile in profiles %}
      	  <li class="profile-list-item-city" >
      	<div style="position:relative;height:105px;">
      	  	<div class="span profile-list-picture">
        	    <a href="/{{ profile.profile_url }}" >
         	       <img src="{{ profile.profile_image }}" alt="{{ profile.first_name }} {{ profile.last_name }} på {{ profile.salon_name }}" height="100" width="100"  />
         	    </a>
      	  	</div>

      	  

         	    <a href="/{{ profile.profile_url }}">
         	     <p class="city-search-profilename" style="display:inline-block">{{ profile.first_name }} {{ profile.last_name }}</p>
         	    </a>
         	    <p class="profile-list-item-city-salon-name">{{ profile.salon_name }}</p>
         	    <p class="profile-list-item-city-salon-adress"> {{ profile.salon_adress }}, {{ profile.salon_city }}</p>
         	    <div class="profile-list-link-to-profile"><a class="search-page-view-on-map pull-right" href="{{ profile.profile_url }}"> <i class="icon-user"></i>Visa Profil</a></div>
         	     
      	</div>
           </li>
           {% endfor %}
           </ul>
           </div>
           
           
          
         </div>   
           
 </div>


    <div id="fb-root"></div>


<script type="text/javascript">
    var geocoder;
    var map;

    function mapInit() {
        var myOptions = {
            center: new google.maps.LatLng(59.33, 18.07),
            zoom: 14,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map_canvas"),
             myOptions);

        geocoder = new google.maps.Geocoder();
        geocoder.geocode( { 'address': '{{ city }}'}, function(results, status) {
            map.setCenter(results[0].geometry.location);
        });
        {% for profile in profiles %}
        geocoder.geocode( { 'address': '{{ profile.salon_adress }}, {{ profile.salon_city }}'},
                                function(results, status) {
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location,
                title: '{{ profile.salon_name }}'
            });
        });


        {% endfor %}

        geocoder.geocode( { 'address': address}, function(results, status) {
            map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });
            if (status == google.maps.GeocoderStatus.OK) {
                latlng = results[0].geometry.location;
            } else {
                console.log("FAIL: "+status);
            }
        });
    }

    $(document).ready(function() {
        mapInit();
    });
</script>

  {% endblock %}


