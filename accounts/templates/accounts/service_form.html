{% extends "base.html" %}
{% load index_extras %}
{% load url from future %}

{% block html-head %}
<!-- used in the service.js file, to know where the service api is located -> doesnt need to hardcode the url -->
<script> SERVICE_API_URL = "{% url 'api_dispatch_list' api_name="profile" resource_name="service" %}"; </script>

<script src="{{ STATIC_URL }}js/underscore-min.js"></script>
<script src="{{ STATIC_URL }}js/backbone-min.js"></script>
<script src="{{ STATIC_URL }}js/backbone-tastypie.js"></script>
<script src="{{ STATIC_URL }}js/backbone.modelbinding.js"></script>

<script type="text/javascript" src="{{ STATIC_URL }}js/jquery-ui-1.8.18.custom.min.js"></script>

{% endblock %}

{% block content %}

{% include "profiles/edit_profile_menu.html" with edit_services="active" %}

<div class="row" >
  <div id="edit-profile-large" class="span12" >
    <br><br>

<script type="text/template" id="tpl-service-list-item">
  <div class="unique-list-item">
  <div class="service-name unique-list-item-part"><b> <%= name %></b></div>
  <div class="service-length unique-list-item-part pull-right"><% if(length != "") 
  { %>
  för <%= length %> minuter
    
<% } %></div>
  
  <div class="service-price unique-list-item-part pull-right"><%= price %>kr&nbsp;</div>
  
  <div class="service-description unique-list-item-block"><%= description %></div>
  
  
  <% if(display_on_profile) { %>
  <div class="service-price unique-list-item-block"><i>Visas på profil</i></div>
  <% } else { %>
  <div class="service-price unique-list-item-block"><i>Visas inte på profilen</i></div>
  <% } %>
  <button style="margin-top:2px" class="btn btn-mini btn-info edit">Redigera</button>
  <button style="margin-top:2px" class="btn btn-mini delete">Ta bort</button>
  </div>
</script>

    <script type="text/template" id="tpl-service-edit-form">
      
        <form class="service-edit-form" action="" method="post">
          {% csrf_token %}
          {% for field in form %}
          <div class="control-group">
            <label style="font-size:12px" class="control-label" for="{{ field.value }}">{{ field.label }}</label>
            <div class="controls">
              {{ field }}
              <span class="help-inline"></span>
            </div>
          </div>
          {% endfor %}
          <button class="btn btn-info save">Lägg till</button>
	  <button class="btn btn-delete new-service ">Rensa fält</button>
</fieldset>
</form>

</script>


<div class="container">
  <div class="row">
  <div class="span8 offset1">
    <h2>Vänligen fyll i er salongs prislista.</h2> 
<h3>Börja med att fylla i formuläret till vänster för varje behandling. Ifall ni sedan vill ändra ordningen i prislistan kan ni göra det i listan till höger.</h3><br><br>
  </div>
    <br>
    <div class="span5">
    <div class="edit-service-form-left">
    <h3>Lägg till en ny behandling</h3>
    <br>
      <div id="form" ></div>
    </div>
    </div>
    <div class="span6 edit-service-form-right hide-block">

    <h2>Prislista</h2>
    <h5>Drag på behandlingarna för att ändra ordningen.</h5>
    <br>
    <div id="service-list" ></div></div>


  </div>
</div>
</div>
</div>
<!-- the code that does the magic on the page -->
<script src="{{ STATIC_URL }}js/service.js"></script>
{% endblock %}
